#1729964117
kubectl delete service xgboost-api-service -n xgboost-servic
#1729964126
kubectl delete pvc xgboost-model-pvc -n xgboost-service
#1729964328
kubectl get secrets -n xgboost-service
#1729964755
kubectl delete pod mongodb-test -n xgboost-service
#1729964841
└─$ kubectl delete service xgboost-api-service -n xgboost-service
#1729967711
git fetch origingit fetch origingit fetch origingit fetch origingit fetch origingit fetch origingit fetch origin
#1729967721
git fetch origin
#1729968434
# List your configuration files
#1729968436
ls *.yaml
#1729968894
kubectl apply -f xgboost-api-deployment.yaml
#1729969091
kubectl logs pod/xgboost-training-job-l8vgj -n xgboost-service
#1729969104
kubectl logs pod/xgboost-api-deployment-658d7957c4-7q5hw -n xgboost-service
#1729969178
kubectl get secret mongodb-credentials -n xgboost-service -o yaml3
#1729969195
kubectl get pvc -n xgboost-service
#1729970109
kubectl delete job --all -n xgboost-service
#1729970226
kubectl run mongodb-test --rm -it --image=mongo -- mongosh "mongodb://monitoringUser:XZ53GQm9XRxs@159.65.167.68:27017/rentals"
#1729970855
# Create configmap
#1729970855
# Create test pod
#1729970855
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: mongo-test
  namespace: xgboost-service
spec:
  containers:
  - name: mongo-test
    image: python:3.9-slim
    command: 
      - /bin/sh
      - -c
      - |
        pip install pymongo && python /app/test_mongo_connection.py
    volumeMounts:
    - name: test-script
      mountPath: /app
  volumes:
  - name: test-script
    configMap:
      name: mongo-test
  restartPolicy: Never
EOF

#1729970856
# Watch the logs
#1729970949
kubectl create configmap mongo-test --from-file=test_mongo_connection.py -n xgboost-service --dry-run=client -o yaml | kubectl apply -f -
#1729970976
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: mongo-test
  namespace: xgboost-service
spec:
  containers:
  - name: mongo-test
    image: python:3.9-slim
    command: 
      - /bin/sh
      - -c
      - |
        pip install pymongo && python /app/test_mongo_connection.py
    volumeMounts:
    - name: test-script
      mountPath: /app
  volumes:
  - name: test-script
    configMap:
      name: mongo-test
  restartPolicy: Never
EOF

#1729971019
└─$ kubectl logs -f mongo-test -n xgboost-service
#1729971019
Error from server (BadRequest): container "mongo-test" in pod "mongo-test" is waiting to start: ContainerCreating
#1729971019
└─$ 
#1729971108
kubectl describe pod mongo-test -n xgboost-service
#1729971358
kubectl delete pod mongo-test -n xgboost-service
#1729971369
kubectl get configmap -n xgboost-service
#1729971380
kubectl delete configmap mongo-test -n xgboost-service
#1729971412
kubectl create configmap mongo-test --from-file=test_mongo_connection.py -n xgboost-service
#1729971430
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: mongo-test
  namespace: xgboost-service
spec:
  containers:
  - name: mongo-test
    image: python:3.9-slim
    command: 
      - /bin/sh
      - -c
      - |
        pip install pymongo && python /app/test_mongo_connection.py
    volumeMounts:
    - name: test-script
      mountPath: /app
  volumes:
  - name: test-script
    configMap:
      name: mongo-test
  restartPolicy: Never
EOF

#1729971453
kubectl get pod mongo-test -n xgboost-service -w
#1729971487
kubectl logs -f mongo-test -n xgboost-service
#1729971536
# Create a network test pod
#1729971540
kubectl run net-test --rm -it --image=busybox -n xgboost-service -- /bin/sh -c "ping -c 4 10.108.0.15"
#1729971683
kubectl get nodes -o wide
#1729971701
kubectl get pods -o wide -n xgboost-service
#1729971733
kubectl run net-test --rm -it --image=busybox -n xgboost-service -- /bin/sh -c "ping -c 4 159.65.167.68"
#1729971766
kubectl get networkpolicies -n xgboost-service
#1729971789
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: network-debug
  namespace: xgboost-service
spec:
  containers:
  - name: network-tools
    image: nicolaka/netshoot
    command: ['sleep', '3600']
EOF

#1729971805
kubectl exec -it network-debug -n xgboost-service -- /bin/bash
#1729972425
doctl kubernetes cluster get k8s-xgboost
#1729973111
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: mongodb-debug
  namespace: xgboost-service
spec:
  containers:
  - name: debug
    image: mongo:latest
    command: ['sleep', '3600']
EOF

#1729973132
kubectl exec -it mongodb-debug -n xgboost-service -- bash
#1729973773
kubectl get pod mongodb-debug -n xgboost-service -o wide
#1729973788
kubectl debug node/pool-xgboost-w4v50 -it --image=ubuntu
#1729973827
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: host-network-test
  namespace: xgboost-service
spec:
  hostNetwork: true
  containers:
  - name: network-test
    image: mongo:latest
    command: ['sleep', '3600']
EOF

#1729973843
kubectl exec -it host-network-test -n xgboost-service -- bash
#1729988244
kubectl delete networkpolicy --all -n xgboost-service
#1729988640
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: mongo-test-final
  namespace: xgboost-service
spec:
  containers:
  - name: mongo
    image: mongo:latest
    command:
      - /bin/bash
      - -c
      - |
        mongosh "mongodb://monitoringUser:XZ53GQm9XRxs@10.108.0.15:27017/rentals?connectTimeoutMS=10000"
EOF

#1729988658
kubectl logs -f mongo-test-final -n xgboost-service
#1729989374
doctl compute droplet get mongodb-router --format ID,Name,VPC
#1729989932
doctl kubernetes cluster get k8s-xgboost --format ID,Name,VPCUUID
#1729989947
doctl vpcs list
#1729990017
kubectl debug node/pool-xgboost-w4v50 -it --image=ubuntu -- chroot /host bash -il
#1729992495
kubectl delete pod --all -n xgboost-service
#1729992536
kubectl delete deployment xgboost-api-deployment -n xgboost-service
#1729992561
kubectl logs -f job/xgboost-training-job -n xgboost-service
#1729992670
kubectl describe pod -n xgboost-service xgboost-training-job-mq98x
#1729992753
kubectl apply -f - <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: mongodb-credentials
  namespace: xgboost-service
type: Opaque
stringData:
  MONGO_USERNAME: "monitoringUser"
  MONGO_PASSWORD: "XZ53GQm9XRxs"
  MONGO_HOST: "10.108.0.15"
  MONGO_PORT: "27017"
  MONGO_DATABASE: "rentals"
  MONGO_COLLECTION: "zip_33131"
EOF

#1729992838
kubectl logs -n xgboost-service xgboost-training-job-qxdw2
#1730057977
kubectl logs -f -n xgboost-service -l job-name=xgboost-training-job
#1730058331
docker build -t dianazawislak/xgboost-trainer:latest .
#1730059722
kubectl delete pods -n xgboost-service -l job-name=xgboost-training-job
#1730059851
# Get the latest pod name and check its logs
#1730060087
kubectl apply -f - <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: mongodb-credentials
  namespace: xgboost-service
stringData:
  MONGO_USERNAME: "monitoringUser"
  MONGO_PASSWORD: "XZ53GQm9XRxs"
  MONGO_HOST: "10.108.0.15"
  MONGO_PORT: "27017"
  MONGO_DATABASE: "rentals"
  MONGO_COLLECTION: "zip_33131"
  MONGO_AUTH_SOURCE: "admin"
  MONGO_OPTIONS: "authSource=admin"
EOF

#1730060325
kubectl logs -f -n xgboost-service $(kubectl get pods -n xgboost-service -l job-name=xgboost-training-job -o name | head -n 1)
#1730060397
kubectl run -it --rm mongo-test --image=mongo -- bash
#1730062745
kubectl apply -f mongo-secret.yaml
#1730062781
kubectl get secret mongo-credentials -n xgboost-service -o yaml
#1730063064
kubectl logs xgboost-training-job-wpm8z -n xgboost-service
#1730063153
kubectl logs xgboost-training-job-r8smj -n xgboost-service
#1730063407
echo $MONGO_USERNAME
#1730063514
kubectl get pods -n xgboost-service -l job-name=xgboost-training-job
#1730063716
└─$ kubectl get pods -n xgboost-service -l job-name=xgboost-training-job
#1730063716
NAME                         READY   STATUS   RESTARTS   AGE
#1730063716
xgboost-training-job-8zjbg   0/1     Error    0          3m34s
#1730063716
xgboost-training-job-bpmcw   0/1     Error    0          116s
#1730063716
xgboost-training-job-kmqm8   0/1     Error    0          25s
#1730063716
xgboost-training-job-vvpbr   0/1     Error    0          2m46s
#1730063716
xgboost-training-job-wn5dv   0/1     Error    0          3m18s
#1730063716
┌──(venv)(diana㉿DianasControlStation)-[/mnt/c/Users/Diana/BUILDS/xgBoost-kubernetes-configuration]
#1730063785
└─$ kubectl logs xgboost-training-job-8zjbg -n xgboost-service
#1730063798
kubectl logs xgboost-training-job-8zjbg -n xgboost-service
#1730065109
kubectl describe pod xgboost-training-job-4cbk9 -n xgboost-service
#1730065151
kubectl logs xgboost-training-job-4cbk9 -n xgboost-service
#1730065451
kubectl logs xgboost-training-job-9wmj2 -n xgboost-service
#1730065751
kubectl logs xgboost-training-job-5th9x -n xgboost-service
#1730066227
kubectl logs xgboost-training-job-mk6md -n xgboost-service
#1730066857
kubectl logs xgboost-training-job-57z9j -n xgboost-service
#1730066998
kubectl apply -f mongodb-credentials.yaml -n xgboost-service
#1730067360
kubectl delete secret mongodb-credentials -n xgboost-service
#1730067659
kubectl apply -f secret.yaml -n xgboost-service
#1730067679
kubectl apply -f mongodb-secret.yaml -n xgboost-service
#1730067726
kubectl logs xgboost-training-job-mlrdp -n xgboost-service
#1730067843
xgboost-training-job-8zjbg   0/1     Error    0          3m34
#1730068147
kubectl logs xgboost-training-job-7g4tq -n xgboost-service
#1730068195
kubectl get secret mongodb-credentials -n xgboost-service -o jsonpath="{.data}" | jq -r 'to_entries[] | "\(.key): \(.value | @base64d)"'
#1730068212
kubectl run mongo-test --rm -i --tty --image=mongo --namespace=xgboost-service -- bash
#1730214011
kubectl get services -n xgboost-service
#1730214093
kubectl get deployment -n xgboost-service
#1730214109
kubectl describe deployment mongodb -n xgboost-service
#1730215409
kubectl delete namespace xgboost-service
#1730215425
kubectl create namespace xgboost-service
#1730215439
kubectl apply -f xgboost-model-pvc.yaml
#1730215458
kubectl apply -f mongodb-secret.yaml
#1730215468
kubectl apply -f mongodb-network-policy.yaml
#1730215518
kubectl apply -f test_mongo_connection.py
#1730215655
kubectl get svc mongodb -n xgboost-service -o jsonpath='{.spec.clusterIP}'
#1730215664
kubectl logs mongodb-5f86b47d74-tcddp -n xgboost-service
#1730216149
kubectl logs mongodb-65567467f8-c22xc -n xgboost-service
#1730216451
kubectl describe pod mongodb-756db94d49-nd2mg -n xgboost-service
#1730216719
kubectl apply -f mongodb-init-configmap.yaml
#1730216812
kubectl logs mongodb-995cd7b6-hgtx -n xgboost-service
#1730216866
kubectl logs mongodb-995cd7b6-h6gtx -n xgboost-service
#1730217032
kubectl get secret mongodb-credentials -n xgboost-service
#1730217163
kubectl get svc mongodb -n xgboost-service
#1730217189
kubectl run mongo-test --rm -i --tty --image=mongo --namespace=xgboost-service -- mongosh --host 10.245.134.104 --port 27017 -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730217402
kubectl run mongo-test --rm -i --tty --image=mongo --namespace=xgboost-service -- mongosh --host mongodb --port 27017 -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730218239
kubectl get all -n xgboost-service
#1730218289
kubectl logs pod/mongodb-c694cf8b6-ntr9x -n xgboost-service
#1730218340
kubectl delete deployment mongodb -n xgboost-service
#1730218341
kubectl delete service mongodb -n xgboost-service
#1730218344
kubectl delete pvc mongodb-pvc -n xgboost-service
#1730218385
kubectl apply -f mongodb-pvc.yaml
#1730218392
kubectl apply -f mongodb-service.yaml
#1730218402
kubectl apply -f mongodb-deployment.yaml
#1730218461
kubectl run mongo-test --rm -i --tty --image=mongo --namespace=xgboost-service -- mongosh --host 10.245.79.243 --port 27017 -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730251200
kubectl get pods -n xgboost-service
#1730251219
kubectl logs $(kubectl get pods -l app=mongodb -n xgboost-service -o jsonpath='{.items[0].metadata.name}') -n xgboost-service
#1730251229
kubectl exec -it $(kubectl get pods -l app=mongodb -n xgboost-service -o jsonpath='{.items[0].metadata.name}') -n xgboost-service -- mongosh -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730251275
kubectl get service mongodb -n xgboost-service
#1730251333
kubectl exec -it $(kubectl get pods -l app=mongodb -n xgboost-service -o jsonpath='{.items[0].metadata.name}') -n xgboost-service -- mongosh
#1730251859
kubectl logs xgboost-training-job-jmcvl -n xgboost-service
#1730252126
kubectl delete job xgboost-training-job -n xgboost-service
#1730252134
kubectl apply -f xgboost-training-job.yaml
#1730252216
kubectl logs xgboost-training-job-b29k5 -n xgboost-service
#1730252243
kubectl run mongodb-test --rm -it --image=mongo -n xgboost-service -- bash
#1730252362
kubectl get secret mongodb-credentials -n xgboost-service -o yaml
#1730252381
kubectl exec -it mongodb-c694cf8b6-7ll9l -n xgboost-service -- mongosh
#1730252729
kubectl get pods -n xgboost-service -w
#1730252774
kubectl logs xgboost-training-job-6pld8 -n xgboost-service+
#1730252779
kubectl logs xgboost-training-job-6pld8 -n xgboost-service
#1730253361
kubectl get service mongodb -n xgboost-service -o wide
#1730253371
kubectl describe service mongodb -n xgboost-service
#1730253394
kubectl get endpoints mongodb -n xgboost-service
#1730253408
kubectl run debug-pod --image=ubuntu -n xgboost-service -- sleep infinity
#1730253421
kubectl exec -it debug-pod -n xgboost-service -- bash
#1730253861
kubectl run debug-pod --image=alpine -n xgboost-service -- sleep infinity
#1730253878
kubectl exec -it debug-pod -n xgboost-service -- sh
#1730253986
kubectl delete pod debug-pod -n xgboost-service
#1730254021
kubectl run mongo-debug --image=mongo -n xgboost-service -- sleep infinity
#1730254040
kubectl exec -it mongo-debug -n xgboost-service -- mongosh --host mongodb --port 27017 -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730254133
kubectl exec -it mongo-debug -n xgboost-service -- mongosh --host 10.244.0.170 --port 27017 -u monitoringUser -p XZ53GQm9XRxs --authenticationDatabase admin
#1730254189
kubectl exec -it mongodb-c694cf8b6-7ll9l -n xgboost-service -- mongosh
#1730254794
kubectl get pods
